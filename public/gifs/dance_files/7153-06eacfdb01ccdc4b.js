"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7153],{49803:function(e,t,n){n.d(t,{Gs:function(){return l},Ni:function(){return s},Ox:function(){return a},a3:function(){return c}});var o=n(64426),i=n(77103),r=n(15890);let a=async(e,t)=>{let n=(0,r.B5)(new URL("".concat(i.publicRuntimeConfig.apiUrl,"user/favorites")),e),a=await (0,o.BB)({url:n,options:{method:"GET",credentials:"same-origin",headers:{authorization:"Token ".concat(t),"Content-Type":"application/json"}}});return await a.json()},c=async(e,t,n)=>u(e,t,n,"POST"),s=async(e,t,n)=>u(e,t,n,"DELETE"),u=async(e,t,n,i)=>{let r=await (0,o.BB)({url:d("user/favorites",t),options:{method:i,body:"gif_id=".concat(e),headers:{cookie:n,Accept:"application/json",Authorization:"Token ".concat(t),"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}});return await r.json()},l=async(e,t)=>{let n=await (0,o.BB)({url:d("user/favorites/statuses",t),options:{method:"POST",headers:{Authorization:"Token ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({gif_ids:[e]})}});return(await n.json()).data.length>0};function d(e,t){return(0,r.B5)(new URL("".concat(i.publicRuntimeConfig.apiUrl).concat(e)),{api_key:i.publicRuntimeConfig.apiKey,access_token:t})}},68774:function(e,t,n){n.d(t,{b:function(){return s}});var o=n(27573),i=n(77103),r=n(7653),a=n(62383),c=n(94657);let s=(0,r.createContext)({takeover:void 0});t.default=e=>{let{children:t,initialTerm:n,takeover:u}=e,{deviceType:l}=(0,r.useContext)(c.Z);return(0,o.jsx)(s.Provider,{value:{takeover:u},children:(0,o.jsx)(a.Z,{initialTerm:n,apiKey:"mobile"===l?i.publicRuntimeConfig.mobileApiKey:i.publicRuntimeConfig.apiKey,children:t})})}},88397:function(e,t,n){n.d(t,{C:function(){return s}});var o=n(27573),i=n(67754),r=n(26863),a=n(7653);let c="39588136",s={c1:"2",c2:c,options:{enableFirstPartyCookie:!0}};t.default=function(){let e=(0,i.usePathname)(),t=(0,a.useRef)(e);return(0,a.useEffect)(()=>{var n;t.current!==e&&(t.current="",(null===(n=window.COMSCORE)||void 0===n?void 0:n.beacon)&&(console.log("comscore beacon for ",e),window.COMSCORE.beacon(s),fetch("/comscore-page-view")))},[e]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.default,{id:"comscore",strategy:"beforeInteractive",children:"\n                var _comscore = _comscore || []; _comscore.push(".concat(JSON.stringify(s),');\n                (function() {\n                    var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true; s.src = "https://sb.scorecardresearch.com/cs/').concat(c,'/beacon.js";\n                    el.parentNode.insertBefore(s, el);\n                })();')})})}},26657:function(e,t,n){n.r(t),n.d(t,{DESKTOP_AD_DIMENSIONS:function(){return h},DESKTOP_CONTAINER_HEIGHT:function(){return d},MOBILE_AD_DIMENSIONS:function(){return p},MOBILE_CONTAINER_HEIGHT:function(){return f},UNIT_NAME:function(){return g}});var o=n(27573),i=n(14882),r=n(94657),a=n(93887),c=n(7653),s=n(63400),u=n(96692),l=n(30993);let d=120,f=70,h=[728,90],p=[320,50],g="top_leaderboard",v=s.ZP.div.withConfig({componentId:"sc-3bc9a9ea-0"})(["position:sticky;top:0;z-index:",";display:flex;flex-wrap:wrap;justify-content:center;align-items:center;background-color:",";height:","px;",""],u.yV+1,a.n7,f,(0,l.gv)((0,s.iv)(["height:","px;"],d))),x=s.ZP.div.withConfig({componentId:"sc-3bc9a9ea-1"})(["background-color:",";width:","px;height:","px;border-radius:4px;overflow:hidden;",""],a.s$,p[0],p[1],(0,l.gv)((0,s.iv)(["width:","px;height:","px;"],h[0],h[1])));t.default=()=>{let{deviceType:e}=(0,c.useContext)(r.Z),{isAdUnitEnabled:t,pageName:n}=(0,c.useContext)(i.Z),a="htlad-".concat(e,"_").concat(g,"_").concat(n);return t(g)&&(0,o.jsx)(v,{children:(0,o.jsx)(x,{children:(0,o.jsx)("div",{className:a})})})}},92095:function(e,t,n){var o=n(27573),i=n(88397),r=n(42054),a=n(20582),c=n(67754),s=n(7653),u=n(3527),l=n(63400),d=n(96692),f=n(30993),h=n(94657),p=n(15890),g=n(6165),v=n(7762);let x=(0,a.default)(()=>Promise.all([n.e(6275),n.e(7031),n.e(3920),n.e(5876),n.e(2104),n.e(7161),n.e(474),n.e(7420),n.e(1841),n.e(3038)]).then(n.bind(n,13038)),{loadableGenerated:{webpack:()=>[13038]},ssr:!1}),m=l.ZP.p.withConfig({componentId:"sc-c6c7b77b-0"})(["text-align:center;padding:10px;"]),w=(0,s.createContext)({gifs:[],setGifs:()=>{}});t.Z=e=>{let{initialGifs:t,fetchGifs:n,gaTrackingUrl:a,width:l,columns:b,noShowMessage:C=(0,o.jsx)(o.Fragment,{children:"No results found."}),columnOffsets:E,onGifClick:y,overlay:k}=e,[S,T]=(0,s.useState)(!0),j=(0,c.useRouter)(),[N,_]=(0,s.useState)(),[I,P]=(0,s.useState)(0);(0,v.$)(a,I);let{deviceType:O}=(0,s.useContext)(h.Z),{width:Z}=(0,u.Z)(),L=(0,g.Z)(),R="desktop"===O;L&&(R=Z>=f.gv.breakpointWidth);let A=(0,s.useMemo)(()=>L?{rootMargin:"0px 0px 250px 0px"}:void 0,[L]),G=(0,s.useMemo)(()=>({gifs:N,setGifs:_}),[N,_]);return S?R||A?(0,o.jsx)(w.Provider,{value:G,children:(0,o.jsx)(r.Grid,{columns:b||(R?4:2),width:l||(R?d.VC:Z),fetchGifs:async e=>{var o;let r=await n(e);return(null===(o=window.COMSCORE)||void 0===o?void 0:o.beacon)&&(window.COMSCORE.beacon(i.C),fetch("/comscore-page-view")),0===r.data.length&&(null==t?void 0:t.length)===0&&T(!1),r},externalGifs:N,initialGifs:t,onGifClick:(e,t)=>{y?y(e,t):(t.preventDefault(),t.stopPropagation(),j.push((0,p.Hn)(e.url)))},gutter:R?12:void 0,overlay:k||(R?x:void 0),hideAttribution:!0,loaderConfig:A,onGifsFetched:e=>{P(e.length),_(e)},columnOffsets:E})}):null:(0,o.jsx)(m,{children:C})}},7762:function(e,t,n){n.d(t,{$:function(){return r}});var o=n(7653),i=n(45151);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,[r,a]=(0,o.useState)([0,1]);(0,o.useEffect)(()=>{let o=Math.floor(t/n)+1;!r.includes(o)&&(a([...r,o]),e&&(0,i.Z)(e(o)))},[e,t,r,n])}},62383:function(e,t,n){n.d(t,{x:function(){return R},Z:function(){return B}});var o=n(27573),i=n(68774),r=n(26657),a=n(14882),c=n(72497),s=n(59752),u=n(93887),l=n(42054),d=n(20582),f=n(67754),h=n(7653),p=n(63400),g=n(14268),v=n(33034),x=n(96692),m=n(30993),w=n(15644),b=n(93782),C=n.n(b),E=n(77103),y=e=>{let{takeover:t}=e,{host:n,pathname:i}=new URL(t.img_src),r="giphy.com"===n?"".concat(E.xj).concat(i):t.img_src;return(0,o.jsx)("a",{href:t.href,target:"_blank",style:{top:10,right:68},className:"absolute hidden cursor-pointer md:block",children:(0,o.jsx)("img",{src:r,height:68,width:400,alt:""})})};let k=(0,d.default)(()=>Promise.all([n.e(7031),n.e(5469),n.e(6575),n.e(3835),n.e(3293)]).then(n.bind(n,83293)),{loadableGenerated:{webpack:()=>[83293]}}),S=(0,d.default)(()=>n.e(1959).then(n.bind(n,51959)),{loadableGenerated:{webpack:()=>[51959]}}),T=(0,d.default)(()=>n.e(5759).then(n.bind(n,95759)),{loadableGenerated:{webpack:()=>[95759]}}),j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=N(e,_),n=e.trim();return t?n.slice(0,n.length-t.length):e},N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t.length)return!1;let n=RegExp("(".concat(t.join("|"),")$"),"gi"),o=e.trim().match(n);return!!o&&o[o.length-1]},_=["gif","gifs","sticker","stickers","video","videos","transparent"],I=(0,p.ZP)(l.SearchBar).withConfig({componentId:"sc-8544dc9f-0"})(["input{font-size:22px;padding-left:14px;font-family:",";","}"," .giphy-search-bar-cancel{width:22px;height:22px;margin-right:10px;","}"],C().style.fontFamily,e=>e.$hasTakeover&&(0,p.iv)(["width:","px;flex:unset;"],e.$isStuck?360:540),e=>e.$hasTakeover&&(0,p.iv)(["justify-content:space-between;"]),e=>e.$hasTakeover&&(0,p.iv)(["position:absolute;left:","px;margin:0;"],540)),P=p.ZP.div.withConfig({componentId:"sc-8544dc9f-1"})(["display:none;"," ",""],(0,m.gv)((0,p.iv)(["top:0;display:block;position:absolute;height:","px;display:flex;align-items:center;z-index:",";"],68,x.yV)),e=>{let{$isStuck:t,$hasTopLeaderboardAd:n}=e;return t&&(0,m.gv)((0,p.iv)(["position:fixed;top:","px;transform:translate3d(0,78px,0);transition:transform 0.5s cubic-bezier(0.165,0.84,0.44,1) 0.3s;"],n?r.DESKTOP_CONTAINER_HEIGHT-70:-70))}),O=p.ZP.div.withConfig({componentId:"sc-8544dc9f-2"})(["padding:5px 0;",""],(0,m.gv)((0,p.iv)(["padding:","px 0 0;"],10))),Z=p.ZP.div.withConfig({componentId:"sc-8544dc9f-3"})(["background-color:",";width:100%;z-index:",";position:sticky;top:-1px;"," ",""],u.eF,x.u0,e=>{let{$hasTopLeaderboardAd:t}=e;return t&&"top: ".concat(r.MOBILE_CONTAINER_HEIGHT-1,"px;")},e=>{let{$hasTopLeaderboardAd:t}=e;return t&&(0,m.gv)((0,p.iv)(["top:","px;"],r.DESKTOP_CONTAINER_HEIGHT-1))}),L=p.ZP.div.withConfig({componentId:"sc-8544dc9f-4"})(["width:100%;"," ",""],(0,m.gv)((0,p.iv)(["transition:width 0.3s cubic-bezier(0.165,0.84,0.44,1) 0s;margin-left:auto;"])),e=>{let{$isStuck:t}=e;return t&&(0,m.gv)((0,p.iv)(["width:calc(100% - ","px);padding-bottom:8px;"],g.Gc))}),R=(0,h.createContext)({ignoreTarget:"",setIgnoreTarget:()=>{}}),A=e=>{let{isStuck:t}=e,{autoFocus:n}=(0,h.useContext)(s.z),{takeover:r}=(0,h.useContext)(i.b),[a,c]=(0,h.useState)(0),{activeChannel:u}=(0,h.useContext)(l.SearchContext),d=(0,h.useCallback)(e=>{if(e){let t=j(e).trim().replaceAll(" ","-").replace("/","");if(u){let e="@".concat(u.slug.trim().toLowerCase());location.href="/search/?q=".concat(e,"+").concat(t)}else location.href="/search/".concat(t)}},[u]);return(0,h.useEffect)(()=>{let e=setTimeout(()=>c(0===a?1:0),3e3);return()=>clearTimeout(e)},[a]),(0,o.jsxs)(O,{children:[(0,o.jsx)(I,{$isStuck:t,$hasTakeover:!!r,placeholder:["Search all the GIFs and Stickers","@username to search channels"][a],onEnter:d,autoFocus:n}),r&&(0,o.jsx)(y,{takeover:r})]})},G=p.ZP.div.withConfig({componentId:"sc-8544dc9f-5"})(["",""],(0,m.gv)((0,p.iv)(["position:relative;width:","px;margin:0 auto;"],x.VC)));var B=e=>{let{apiKey:t,children:n,initialTerm:i}=e,s=(0,f.useRouter)(),{user:u}=(0,h.useContext)(w.Z),{favorites:d}=(0,h.useContext)(c.ZP),[p,x]=(0,h.useState)(""),m=(0,h.useRef)(null),[b,C]=(0,h.useState)(!1),{isAdUnitEnabled:E}=(0,h.useContext)(a.Z),y=E(r.UNIT_NAME);return(0,h.useEffect)(()=>{let e;return m.current&&(e=new IntersectionObserver(e=>{let[t]=e;C(t.intersectionRatio<1)},{threshold:[1],rootMargin:"".concat(y?-r.DESKTOP_CONTAINER_HEIGHT:0,"px 1000px 1000px 1000px")})).observe(m.current),()=>null==e?void 0:e.disconnect()},[y]),(0,o.jsxs)(G,{children:[(0,o.jsx)(R.Provider,{value:{setIgnoreTarget:x,ignoreTarget:p},children:(0,o.jsxs)(l.SearchContextManager,{initialTerm:i?decodeURIComponent(i):i,apiKey:t,shouldFetchChannels:!1,theme:{searchbarHeight:68,mobileSearchbarHeight:68},children:[(0,o.jsx)(S,{}),(0,o.jsx)(g.ZP,{user:u,onLogoClick:()=>{s.push("/")},hasFavorites:d.length>0}),(0,o.jsx)(P,{$hasTopLeaderboardAd:y,$isStuck:b,children:(0,o.jsx)(v.ZP,{})}),(0,o.jsx)(Z,{$hasTopLeaderboardAd:y,ref:m,children:(0,o.jsxs)(L,{$isStuck:b,children:[(0,o.jsx)(A,{isStuck:b}),(0,o.jsx)(k,{isStuck:b})]})}),n]})}),(0,o.jsx)(T,{})]})}},14882:function(e,t,n){let o=(0,n(7653).createContext)({adsEnabled:!1,adUnits:[],isAdUnitEnabled:()=>!1,pageName:void 0});t.Z=o},72497:function(e,t,n){n.d(t,{c5:function(){return u},k1:function(){return f},xL:function(){return d}});var o=n(27573),i=n(49803),r=n(7653),a=n(15644);let c=(0,r.createContext)({favorites:[],setFavorites:()=>{},hasChecked:[],setHasChecked:()=>{}}),s=e=>{let{user:t}=(0,r.useContext)(a.Z),n=(0,r.useState)([]),[o,i]=(0,r.useState)(!1),c=(0,r.useRef)(!1),[s,u]=n;return(0,r.useEffect)(()=>{if(t){if(!c.current){c.current=!0;let n=window.localStorage.getItem(e);l(n?JSON.parse(n):[],t,e)}}else if(o)try{window.localStorage.setItem(e,JSON.stringify(Array.from(new Set(s))))}catch(t){console.error("failed to set ".concat(e," in local"))}else try{let t=window.localStorage.getItem(e);u(t?JSON.parse(t):[]),i(!0)}catch(e){}},[o,e,u,s,t]),n},u=e=>{let{children:t}=e,[n,i]=s("local-favorites"),[a,u]=(0,r.useState)([]);return(0,r.useEffect)(()=>{},[]),(0,o.jsx)(c.Provider,{value:{favorites:n,setFavorites:i,hasChecked:a,setHasChecked:u},children:t})};async function l(e,t,n){let o=e[0];if(o)try{setTimeout(async()=>{await (0,i.a3)(o,t.token,document.cookie),window.localStorage.setItem(n,JSON.stringify(e.filter(e=>e!==o))),l(e.slice(1),t,n)},100)}catch(e){console.error("failed to sync favorite ".concat(o),e)}}function d(e){let{user:t}=(0,r.useContext)(a.Z),{favorites:n,setFavorites:o,hasChecked:s,setHasChecked:u}=(0,r.useContext)(c),l=(0,r.useRef)(!1);if((0,r.useEffect)(()=>{async function n(e){if(t){let n=await (0,i.Gs)(e,t.token);o(t=>{let o=t.includes(e);return n&&!o?[...t,e]:!n&&o?t.filter(t=>t!==e):t}),u(t=>[...t,e])}else console.error("no user in useFavorites hook")}!e||l.current||s.includes(e)||(l.current=!0,n(e))},[s,e,o,u,t]),e)return t?s.includes(e)?n.includes(e):void 0:n.includes(e)}function f(){let{user:e}=(0,r.useContext)(a.Z),{favorites:t,setFavorites:n}=(0,r.useContext)(c);return async function(o){let r=t.includes(o);if(e)return r?r&&(await (0,i.Ni)(o,e.token,document.cookie),n(e=>e.filter(e=>e!==o))):(await (0,i.a3)(o,e.token,document.cookie),n(e=>[...e,o])),!r;r?n(e=>e.filter(e=>e!==o)):n(e=>[...e,o])}}t.ZP=c},59752:function(e,t,n){n.d(t,{z:function(){return a}});var o=n(27573),i=n(94657),r=n(7653);let a=(0,r.createContext)({autoFocus:!1});t.Z=e=>{let{children:t}=e,{deviceType:n}=(0,r.useContext)(i.Z),[c,s]=(0,r.useState)("desktop"===n);(0,r.useEffect)(()=>{s(!1)},[]);let u=(0,r.useMemo)(()=>({autoFocus:c}),[c]);return(0,o.jsx)(a.Provider,{value:u,children:t})}},94657:function(e,t,n){let o=(0,n(7653).createContext)({deviceType:void 0});t.Z=o},15644:function(e,t,n){let o=(0,n(7653).createContext)({user:{},hasFetchedUser:!1});t.Z=o},45151:function(e,t,n){n.d(t,{Z:function(){return u},t:function(){return l}});var o=n(90526),i=n(7653),r=n(52531),a=n(15644);let c=window||{},s={ENABLED:c.DEBUG||c.location&&(0===location.href.indexOf("http://local.giphy.com")||-1!==location.search.indexOf("debug=true")),LEVEL:0,debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];s.ENABLED&&s.LEVEL<=0&&console.debug(...t)},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];s.ENABLED&&s.LEVEL<=1&&console.info(...t)},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];s.ENABLED&&s.LEVEL<=2&&console.warn(...t)},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];s.ENABLED&&s.LEVEL<=3&&console.error(...t)}},u=e=>{e&&(s.debug("trackPageView virtualPageURL: ".concat(e)),window.didomiOnReady.push(()=>{s.debug("SEND: trackPageView virtualPageURL: ".concat(e)),window.dataLayer.push({event:"VirtualPageview",virtualPageURL:e,virtualPageName:e,...(0,o.yU)()})}))},l=function(){let{channel:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.bM)(),[n,c]=(0,r.Z)("login_type",t.platform||"email"),{user:s,hasFetchedUser:u}=(0,i.useContext)(a.Z);(0,i.useEffect)(()=>{(0,o.wj)({creatorId:e?"".concat(e.id):void 0,creatorName:null==e?void 0:e.user.username})},[e]),(0,i.useEffect)(()=>{if(u){let e=(0,o.PR)();s&&(e={userID:"".concat(s.id),userType:s.is_staff?"staff":s.user_type,loginMethod:t.platform||n,dashboardAnalytics:s.permissions.dashboard_analytics,verifiedStatus:s.is_verified,loggedInStatus:!0}),(0,o.av)(e),t.action&&(c(t.platform),(0,o.u2)({event:"".concat(t.action,"_form_success"),options:{form:{formName:t.action}}})),window.dataLayer=window.dataLayer||[],window.dataLayer.push((0,o.rD)())}},[u])}},15890:function(e,t,n){n.d(t,{B5:function(){return a},Hn:function(){return o},W5:function(){return u},dr:function(){return i},ej:function(){return r},oH:function(){return c},xl:function(){return s}});let o=e=>"/".concat(e.replace(/^(?:\/\/|[^\/]+)*\//,"")),i=(e,t)=>{t.preventDefault(),t.stopPropagation(),location.href=o(e.url)};function r(e,t){let n=(t||document.cookie).split(";");for(let t=0;t<n.length;t++){let o=n[t].trim();if(o.startsWith(e+"="))return o.substring(e.length+1)}return""}let a=(e,t)=>(Object.entries(t).forEach(t=>{let[n,o]=t;e.searchParams.append(n,o)}),e),c=e=>e.replace(/ /g,"-");function s(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{method:"POST",headers:{Accept:"application/json","Content-Type":t?"multipart/form-data":"application/json","X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest",credentials:"same-origin"}}}let u=(e,t)=>{let{results:n=[]}=e,o=n.length;return{data:n,pagination:{count:o,total_count:1/0,offset:t},meta:{msg:"",response_id:"",status:200}}}},6165:function(e,t,n){var o=n(7653);t.Z=function(){let[e,t]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{t(!0)},[]),e}}}]);
//# sourceMappingURL=7153-06eacfdb01ccdc4b.js.map